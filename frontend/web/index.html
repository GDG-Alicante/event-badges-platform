<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GDG Alicante - Reclamar Insignia</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="icon" href="favicon.svg">
</head>

<body>

    <!-- Contenedor Principal Persistente -->
    <div class="container">

        <!-- Vista: Formulario de Reclamación -->
        <div id="claim-view" style="display: none;">
            <div class="header">
                <img src="gdg_logo.png" alt="Logo GDG Alicante" class="gdg-logo">
                <h1 id="main-title">Reclama tu Insignia Digital</h1>
            </div>
            <div class="prose">
                <p>
                    Introduce el correo electrónico que usaste en el registro y selecciona el evento para generar tu
                    insignia.
                </p>
                <div class="notice-box">
                    <h3>Aviso de Publicación y Privacidad</h3>
                    <p>
                        Al continuar, se generará y publicará de forma permanente una credencial digital (Open Badge)
                        que contendrá <strong>tu nombre completo</strong> y los <strong>detalles del evento</strong>.
                    </p>
                    <ul>
                        <li>La insignia se asociará a tu dirección de correo: <strong>tu email no será público</strong>,
                            pero es la clave para verificar y gestionar tu credencial.</li>
                    </ul>
                    <p>
                        La credencial en sí será visible en una página pública para su validación.
                    </p>
                </div>
            </div>

            <h2 id="event-name" style="display: none;"></h2>

            <div id="loading-indicator">
                <p>Cargando eventos disponibles...</p>
                <div class="spinner"></div>
            </div>

            <div id="form-container" style="display: none;">
                <form id="claim-form">
                    <div id="event-selector-placeholder">
                        <div class="form-group">
                            <label for="event-selector">1. Selecciona el evento:</label>
                            <select id="event-selector"></select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="email-input" id="email-label">2. Introduce tu correo electrónico:</label>
                        <input type="email" id="email-input" required placeholder="tu.email@ejemplo.com">
                    </div>
                    <button type="submit" id="submit-button">Generar mi Insignia</button>
                </form>
                <div id="status" style="display: none;"></div>
            </div>
        </div>

        <!-- Vista: Agradecimiento -->
        <div id="thank-you-view" style="display: none;">
            <div class="header">
                <img src="gdg_logo.png" alt="Logo GDG Alicante" class="gdg-logo">
            </div>
            <div class="prose">
                <h2>Enhorabuena!</h2>

                <p>Tu insignia está siendo generanda.</p>

                <p>Esto puede tardar unos minutos. Se te redirigirá a la página de tu insignia, que estará disponible en
                    cuanto termine el proceso.</p>
                <p>Si la redirección automática falla, usa el botón de abajo.</p>
            </div>
            <div class="button-group">
                <button id="view-badge-button">Ir a la página de la insignia</button>
                <button id="new-claim-button" class="secondary">Reclamar otra insignia</button>
            </div>
        </div>

        <!-- Vista: Certificado -->
        <div id="certificate-view" style="display: none;">
            <div class="card" id="certificate-card">
                <div class="card-header">
                    <img id="issuer-logo" src="" alt="Logo del Emisor" class="issuer-logo">
                </div>
                <div class="card-body">
                    <img id="badge-image" src="" alt="Imagen de la Insignia" class="badge-image">
                    <h2 id="badge-name" class="badge-name"></h2>
                    <p id="badge-description" class="badge-description"></p>
                    <p class="recipient-intro">Certificado otorgado a:</p>
                    <p class="recipient-name" id="recipient-name"></p>
                    <p class="issue-date" id="issue-date"></p>
                </div>
                <div class="card-footer">
                    <a id="verification-link" href="#" class="verification-link" target="_blank">Verificar
                        Credencial</a>
                </div>
            </div>
        </div>

    </div>

    <script src="main.dart.js"></script>
</body>

</html>